(this.webpackJsonptodolist=this.webpackJsonptodolist||[]).push([[0],{156:function(e,t,n){},170:function(e,t,n){"use strict";n.r(t);var r,a,c,o,i,s,d,l,j,u,b=n(0),p=n.n(b),O=n(58),h=n.n(O),x=n(11),m=(n(156),n(83)),f=n(19),g=n(238),v=n(233),w=n(239),y=n(240),C=n(130),S=n.n(C),k=n(1),$=Object(b.memo)((function(e){var t=e.setSearch,n=e.search;return Object(k.jsxs)(g.a,{variant:"standard",sx:{maxWidth:300,width:"100%"},children:[Object(k.jsx)(v.a,{htmlFor:"input-with-icon-adornment",children:"Search for todos"}),Object(k.jsx)(w.a,{id:"input-with-icon-adornment",value:n,onChange:function(e){return t(e.target.value)},startAdornment:Object(k.jsx)(y.a,{position:"start",children:Object(k.jsx)(S.a,{color:"primary",fontSize:"large"})})})]})})),I=n(231),T=n(22),A=n(226),P=(Object(A.a)(r||(r=Object(T.a)(["\n  {\n    getAllPosts {\n      id\n      title\n      body\n      completed\n      author {\n        id\n      }\n    }\n  }\n"]))),Object(A.a)(a||(a=Object(T.a)(["\n  query getAllUsers {\n    id\n    username\n    password\n    posts {\n      id\n      title\n      body\n    }\n  }\n"]))),Object(A.a)(c||(c=Object(T.a)(["\n  query getUserById {\n    id\n    username\n    password\n    posts {\n      id\n      title\n      body\n    }\n  }\n"]))),Object(A.a)(o||(o=Object(T.a)(["\n  {\n    getCurrentUser {\n      id\n      username\n    }\n  }\n"])))),U=Object(A.a)(i||(i=Object(T.a)(["\n  {\n    getUserPosts {\n      id\n      title\n      body\n      completed\n      author {\n        id\n      }\n    }\n  }\n"]))),W=n(27),B=n.n(W),D=n(60),q=n(40),R=n(236),z=n(229),L=Object(A.a)(s||(s=Object(T.a)(["\n  mutation LoginUser($username: String!, $password: String!) {\n    login(username: $username, password: $password)\n  }\n"]))),F=Object(A.a)(d||(d=Object(T.a)(["\n  mutation RegisterUser($username: String!, $password: String!) {\n    register(username: $username, password: $password)\n  }\n"]))),E=Object(A.a)(l||(l=Object(T.a)(["\n  mutation AddNewPost($title: String!, $body: String!, $completed: Boolean!) {\n    addPost(title: $title, body: $body, completed: $completed) {\n      id\n      title\n      body\n      author {\n        id\n      }\n    }\n  }\n"]))),M=Object(A.a)(j||(j=Object(T.a)(["\n  mutation RemovePost($postId: String!) {\n    deletePost(postId: $postId)\n  }\n"]))),N=Object(A.a)(u||(u=Object(T.a)(["\n  mutation UpdatePost($id: String!, $title: String, $body: String, $completed: Boolean) {\n    updatePost(id: $id, title: $title, body: $body, completed: $completed) {\n      title\n    }\n  }\n"]))),H=function(e){var t=e.id,n=e.completed,r=e.todos,a=e.setTodos,c=Object(R.a)(N),o=Object(x.a)(c,2),i=o[0],s=o[1].loading,d=Object(b.useCallback)(function(){var e=Object(q.a)(B.a.mark((function e(t,n){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i({variables:{id:t,completed:n}});case 3:a(r.map((function(e){return e.id!==t?e:Object(D.a)(Object(D.a)({},e),{},{completed:!e.completed})}))),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),alert(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),[i,r,a]);return Object(k.jsx)(z.a,{size:"large",checked:n,disabled:s,onClick:function(){return d(t,!n)}})},J=n(243),G=n(241),K=n(242),Q=n(235),V=n(225),X=function(e){var t=e.children,n=e.open,r=e.onClose;return Object(k.jsx)(V.a,{open:n,onClose:r,children:Object(k.jsx)(K.a,{sx:{width:"100%",maxWidth:500,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",border:"2px solid",borderColor:"primary.main",borderRadius:"1rem",boxShadow:24,p:4},children:t})})},Y=n(133),Z=n.n(Y),_=function(e){var t=e.postId,n=e.todos,r=e.setTodos,a=Object(R.a)(M),c=Object(x.a)(a,2),o=c[0],i=c[1].loading,s=Object(b.useState)(!1),d=Object(x.a)(s,2),l=d[0],j=d[1],u=function(){var e=Object(q.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o({variables:{postId:t}});case 3:j(!1),r(n.filter((function(e){return e.id!==t}))),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),alert("\u041e\u0448\u0438\u0431\u043a\u0430"),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(J.a,{"aria-label":"delete",onClick:function(){return j(!0)},children:Object(k.jsx)(Z.a,{color:"primary",fontSize:"large"})}),Object(k.jsxs)(X,{open:l,onClose:function(){return j(!1)},children:[Object(k.jsx)(G.a,{sx:{mb:"1em",textAlign:"center"},variant:"h5",component:"p",children:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u0443\u044e \u0437\u0430\u0434\u0430\u0447\u0443?"}),Object(k.jsxs)(K.a,{sx:{display:"flex",justifyContent:"space-around"},children:[Object(k.jsx)(Q.a,{disabled:i,variant:"contained",onClick:function(){return u(t)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),Object(k.jsx)(Q.a,{variant:"contained",onClick:function(){return j(!1)},children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})]})]})]})},ee=Object(b.memo)((function(e){var t=e.todos,n=e.setTodos,r=e.postId,a=e.title,c=e.desc,o=e.completed,i=e.onToggleCompleted;return Object(k.jsx)(K.a,{sx:{border:"2px solid",borderColor:"primary.main",padding:"1rem",wordWrap:"break-word"},children:Object(k.jsxs)(K.a,{sx:{display:"flex",alignItems:"center",gap:"10px"},children:[Object(k.jsx)(H,{id:r,onToggleCompleted:i,completed:o,todos:t,setTodos:n}),Object(k.jsxs)(K.a,{sx:{flex:1,overflow:"hidden",display:"flex",flexDirection:"column",gap:"1rem"},children:[Object(k.jsx)(G.a,{component:"p",variant:"h5",children:o?Object(k.jsx)("del",{children:a}):a}),Object(k.jsx)(G.a,{component:"p",variant:"h6",children:o?Object(k.jsx)("del",{children:c}):c})]}),Object(k.jsx)(_,{todos:t,setTodos:n,postId:r})]})})})),te=n(25),ne=n(232),re=n(230),ae=n(223),ce=Object(b.memo)((function(e){var t=e.addNew,n=e.loading,r=Object(b.useState)(""),a=Object(x.a)(r,2),c=a[0],o=a[1],i=Object(b.useState)(""),s=Object(x.a)(i,2),d=s[0],l=s[1],j=function(){var e=Object(q.a)(B.a.mark((function e(n){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,t(c,d,!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsxs)(K.a,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.7rem"},component:"form",onSubmit:j,action:"",children:[Object(k.jsx)(G.a,{component:"p",variant:"h5",children:"Add new Todo"}),Object(k.jsx)(ae.a,{label:"Title",id:"todo-title",required:!0,value:c,onChange:function(e){return o(e.target.value)},sx:{maxWidth:400,width:"100%"},disabled:n}),Object(k.jsx)(ae.a,{id:"todo-description",onChange:function(e){return l(e.target.value)},required:!0,value:d,label:"Description",multiline:!0,maxRows:6,sx:{maxWidth:400,width:"100%"},disabled:n}),Object(k.jsx)(Q.a,{disabled:n,variant:"contained",type:"submit",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443"})]})})),oe=function(e){var t=e.setTodos,n=e.todos,r=Object(b.useState)(!1),a=Object(x.a)(r,2),c=a[0],o=a[1],i=Object(b.useState)(!1),s=Object(x.a)(i,2),d=s[0],l=s[1],j=Object(R.a)(E,{onCompleted:function(e){var r=e.addPost;t([].concat(Object(te.a)(n),[r])),o(!1)}}),u=Object(x.a)(j,2),p=u[0],O=u[1].loading,h=Object(b.useCallback)(function(){var e=Object(q.a)(B.a.mark((function e(t,n,r){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p({variables:{title:t,body:n,completed:r}});case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),l(!0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,n,r){return e.apply(this,arguments)}}(),[p]);return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(Q.a,{variant:"contained",onClick:function(){return o(!0)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u0437\u0430\u0434\u0430\u0447\u0443"}),Object(k.jsx)(X,{open:c,onClose:function(){return o(!1)},children:Object(k.jsx)(ce,{addNew:h,loading:O})}),Object(k.jsx)(ne.a,{open:d,onClose:function(){return l(!1)},autoHideDuration:3e3,children:Object(k.jsx)(re.a,{onClose:function(){return l(!1)},sx:{width:"100%"},severity:"error",children:"Error!"})})]})},ie=Object(b.createContext)(null),se=function(){var e=Object(b.useContext)(ie).setIsAuth,t=Object(f.g)();return Object(k.jsx)(Q.a,{variant:"outlined",onClick:function(){localStorage.removeItem("token"),t.push("/"),e(!1)},children:"LOGOUT"})},de=n(245),le=n(246),je=n(221),ue=function(){var e,t=Object(b.useState)(),n=Object(x.a)(t,2),r=n[0],a=n[1],c=Object(b.useState)(""),o=Object(x.a)(c,2),i=o[0],s=o[1],d=Object(I.a)(U,{onCompleted:function(e){a(e.getUserPosts)}}).loading,l=Object(I.a)(P),j=l.data,u=l.loading,p=Object(b.useCallback)((function(e){return s(e)}),[]),O={display:"flex",justifyContent:"space-between",flexWrap:"wrap",gap:"1.3rem",marginBottom:"1rem"};return d||u?Object(k.jsx)(K.a,{sx:{height:"50vh",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(k.jsx)(de.a,{size:150})}):Object(k.jsxs)(le.a,{sx:{marginBlock:"2rem"},children:[Object(k.jsxs)(K.a,{sx:O,children:[Object(k.jsx)(G.a,{sx:{width:300,display:"inline-block",overflow:"hidden",textOverflow:"ellipsis"},variant:"h5",component:"p",children:j.getCurrentUser.username}),Object(k.jsx)(se,{})]}),Object(k.jsxs)(K.a,{sx:O,children:[Object(k.jsx)(oe,{setTodos:a,todos:r}),Object(k.jsx)($,{search:i,setSearch:p})]}),Object(k.jsx)(G.a,{textAlign:"center",variant:"h4",component:"p",marginBottom:"1em",sx:{overflow:"auto"},children:i?"Search: ".concat(i):"My todos"}),Object(k.jsxs)(je.a,{spacing:1,children:[0===(null===r||void 0===r?void 0:r.length)&&Object(k.jsx)(G.a,{variant:"h5",component:"p",textAlign:"center",children:"Todos not found."}),null===(e=null===r||void 0===r?void 0:r.filter((function(e){var t;return null===e||void 0===e||null===(t=e.title)||void 0===t?void 0:t.toUpperCase().includes(i.toUpperCase())})))||void 0===e?void 0:e.map((function(e){return Object(k.jsx)(ee,{todos:r,setTodos:a,postId:e.id,title:e.title,desc:e.body,completed:e.completed},e.id)}))]})]})},be=function(e){var t=e.children,n=e.type,r=void 0===n?"button":n,a=e.disabled;return Object(k.jsx)(Q.a,{type:r,variant:"contained",sx:{maxWidth:200,width:"100%"},disabled:a,children:t})},pe=function(e){var t=e.children,n=e.onSubmit;return Object(k.jsx)(K.a,{sx:{display:"flex",justifyContent:"center",alignItems:"center",maxWidth:"100%",height:"100%"},children:Object(k.jsx)(K.a,{component:"form",onSubmit:n,action:"",sx:{maxWidth:600,width:"100%",minHeight:500,display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:"1.2rem",border:"1px solid rgba(0,0,0,0.3)",padding:"1rem"},children:t})})},Oe=function(e){return Object(k.jsx)(ae.a,Object(D.a)({variant:"outlined",sx:{maxWidth:300,width:"100%"},required:!0},e))},he=function(){var e=Object(b.useState)(""),t=Object(x.a)(e,2),n=t[0],r=t[1],a=Object(b.useState)(""),c=Object(x.a)(a,2),o=c[0],i=c[1],s=Object(R.a)(F),d=Object(x.a)(s,2),l=d[0],j=d[1].loading,u=Object(f.g)(),p=function(){var e=Object(q.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,l({variables:{username:n,password:o}});case 4:u.push("/"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),alert("\u041e\u0448\u0438\u0431\u043a\u0430"),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsxs)(pe,{onSubmit:p,children:[Object(k.jsx)("h2",{children:"Registration"}),Object(k.jsx)(Oe,{id:"login",label:"Login",value:n,onChange:function(e){return r(e.target.value)},disabled:j}),Object(k.jsx)(Oe,{id:"password",label:"Password",value:o,onChange:function(e){return i(e.target.value)},disabled:j,type:"password"}),Object(k.jsx)(be,{type:"submit",disabled:j,children:"Create account"})]})},xe=function(){var e=Object(R.a)(L),t=Object(x.a)(e,2),n=t[0],r=t[1].loading,a=Object(b.useState)(""),c=Object(x.a)(a,2),o=c[0],i=c[1],s=Object(b.useState)(""),d=Object(x.a)(s,2),l=d[0],j=d[1],u=Object(f.g)(),p=Object(b.useContext)(ie).setIsAuth,O=function(){var e=Object(q.a)(B.a.mark((function e(t){var r,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,n({variables:{username:o,password:l}});case 4:r=e.sent,a=r.data,localStorage.setItem("token",a.login),p(!0),u.push("/home"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),alert("\u041e\u0448\u0438\u0431\u043a\u0430"),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(k.jsxs)(pe,{onSubmit:O,children:[Object(k.jsx)("h2",{children:"Login"}),Object(k.jsx)(Oe,{id:"login",label:"Login",value:o,onChange:function(e){return i(e.target.value)},disabled:r}),Object(k.jsx)(Oe,{id:"password",label:"Password",value:l,onChange:function(e){return j(e.target.value)},disabled:r,type:"password"}),Object(k.jsx)(be,{type:"submit",disabled:r,children:"Confirm"}),Object(k.jsx)(be,{disabled:r,children:Object(k.jsx)(m.b,{to:"/registration",children:"Registration"})})]})},me=function(){return Object(k.jsx)(K.a,{sx:{alignItems:"center",backgroundColor:"primary.main",padding:"1rem"},component:"header",children:Object(k.jsx)(G.a,{component:"p",variant:"h5",color:"whitesmoke",children:"Maybetomorrow"})})},fe=function(){var e=Object(b.useContext)(ie).isAuth;return Object(k.jsx)(m.a,{children:e?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(me,{}),Object(k.jsxs)(f.d,{children:[Object(k.jsx)(f.b,{exact:!0,path:"/home",children:Object(k.jsx)(ue,{})}),Object(k.jsx)(f.a,{to:"/home"})]})]}):Object(k.jsxs)(f.d,{children:[Object(k.jsx)(f.b,{exact:!0,path:"/",children:Object(k.jsx)(xe,{})}),Object(k.jsx)(f.b,{path:"/registration",children:Object(k.jsx)(he,{})}),Object(k.jsx)(f.a,{to:"/"})]})})},ge=n(137),ve=n(224),we=n(227),ye=n(135),Ce=Object(ge.a)({uri:"https://maybetomorrow-server.herokuapp.com/graphql"}),Se=Object(ye.a)((function(e,t){var n=t.headers,r=localStorage.getItem("token");return{headers:Object(D.a)(Object(D.a)({},n),{},{authorization:r?"Bearer ".concat(r):""})}})),ke=new ve.a({link:Se.concat(Ce),cache:new we.a}),$e=n(222),Ie=function(){var e=Object(b.useState)(!1),t=Object(x.a)(e,2),n=t[0],r=t[1];return Object(b.useEffect)((function(){localStorage.getItem("token")?r(!0):r(!1)}),[]),Object(k.jsx)(ie.Provider,{value:{isAuth:n,setIsAuth:r},children:Object(k.jsx)($e.a,{client:ke,children:Object(k.jsx)(fe,{})})})};h.a.render(Object(k.jsx)(p.a.StrictMode,{children:Object(k.jsx)(Ie,{})}),document.getElementById("root"))}},[[170,1,2]]]);
//# sourceMappingURL=main.cf247f3d.chunk.js.map